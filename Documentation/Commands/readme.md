# Commands
Commands are encapsulated into JSON formatted message which are used to send information to Bragi and can be used to retrieve data or - like said - initiate a command, depending on the incoming `Command` property.
A message may contain optional parameters that may be omitted.

## Syntax

Property | Type | Description
------------ | ------------- | -------------
UUID | `string` | Optional unique identifier, generated by your application. If provided, response is provided
Command | `string` | The command to perform. Required
Params | `object{}` | The parameter for a given command. If command is executed without any params but has required parameters, an exception may be thrown. Is **always** an object if present

Example:
```json
{ "Command": "DoSomething" }
```

```json
{ "UUID": "1234", "Command": "DoSomethingAndGiveResult" }
```

```json
{ "UUID": "2345", "Command": "SumTheseNumbers", "Params": {"Values": [1, 2, 3, 4]} }
```

```json
{ "UUID": "6789", "Command": "GetAudioDevices" }
```

```ts
interface BragiMessage {
    UUID?: string;
    Command: string;
    Params?: {
        [key: string]: any
    }
}
```

## Result / Response
If the message contains an `UUID` property, Bragi will send a response after executing the command. Imagine you want to perform the same command twice with different parameters at the same time. By generating and providing an `UUID` you can identify which result belongs to which sent command.

The response consists of:

Property | Type  | Description
------------ | ------------- | -------------
UUID | `string` | The identifier that caused the execution of the command
Code | `uint` | The [return code](#returncodes)
Data | `any` | The data from the executed command. Varies between commands

```json
{ "UUID": "1234", "Code": 0, "Data": "I did something." }
```

```json
{ "UUID": "2345", "Code": 0, "Data": 10 }
```

```json
{ "UUID": "6789", "Code": 0, "Data": { "In": [{"ID": "12345", "Name": "My Microphone"}], "Out": [{"ID": "54321", "Name": "My Speakers"}] } }
```
```ts
interface BragiResponse {
    UUID: string;
    Code: BragiResponseCode;
    Data: (number | string | boolean | object) | [ErrorCode, string];
}
```
### Return Codes

Code | Data Content | Description 
------------  | ------------- | -------------
`0` | The command response | Command successfully executed
`1` | `""`| Unknown Command - The command that was sent to Bragi may have been wrong. Check for misspelling
`2` | `"Provided parameter object is missing key {Name}"` | Missing parameter - `{Name}`
`3` | `[ErrorCode, command]` | Command Error - An error occured when trying to resolve the command. Varies from command to command
`4` | `"Exception Message"`| Unexpected Exception - An unexpected exception was thrown during the execution of the command

```ts
enum BragiResponseCode {
    OKAY,
    UNKNOWN_COMMAND,
    MISSING_PARAMETER,
    COMMAND_ERROR,
    EXCEPTION
}
```

## On Errors
If a response code is present that resembles an error (> 0), the `Data` field of the response may contain additional information. In case of a `Command Error` the `Data` is an array with a more specific error code. Please consult the respective command.

All errors are logged for your viewing pleasure. 

**IMPORTANT:** You will only receive errors on your client if an `UUID` is provided, so you may provide a `UUID` when error handling is needed.